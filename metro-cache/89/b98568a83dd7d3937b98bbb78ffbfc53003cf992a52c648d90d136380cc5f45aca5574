{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"./polyfillNextTick","data":{"isAsync":false}},{"name":"lodash/zipObject","data":{"isAsync":false}},{"name":"react-native","data":{"isAsync":false}},{"name":"@unimodules/core","data":{"isAsync":false}},{"name":"@expo/websql/custom","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.openDatabase = openDatabase;\n  exports.default = void 0;\n\n  var _slicedToArray2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\"));\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/createClass\"));\n\n  _$$_REQUIRE(_dependencyMap[4], \"./polyfillNextTick\");\n\n  var _zipObject = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"lodash/zipObject\"));\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[6], \"react-native\");\n\n  var _core = _$$_REQUIRE(_dependencyMap[7], \"@unimodules/core\");\n\n  var _custom = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[8], \"@expo/websql/custom\"));\n\n  var ExponentSQLite = _core.NativeModulesProxy.ExponentSQLite;\n  ;\n  ;\n\n  var SQLiteDatabase = function () {\n    function SQLiteDatabase(name) {\n      (0, _classCallCheck2.default)(this, SQLiteDatabase);\n      this._closed = false;\n      this._name = name;\n    }\n\n    (0, _createClass2.default)(SQLiteDatabase, [{\n      key: \"exec\",\n      value: function exec(queries, readOnly, callback) {\n        if (this._closed) {\n          throw new Error(\"The SQLite database is closed\");\n        }\n\n        ExponentSQLite.exec(this._name, queries.map(_serializeQuery), readOnly).then(function (nativeResultSets) {\n          callback(null, nativeResultSets.map(_deserializeResultSet));\n        }, function (error) {\n          callback(error instanceof Error ? error : new Error(error));\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        this._closed = true;\n        ExponentSQLite.close(this._name);\n      }\n    }]);\n    return SQLiteDatabase;\n  }();\n\n  function _serializeQuery(query) {\n    return [query.sql, _reactNative.Platform.OS === 'android' ? query.args.map(_escapeBlob) : query.args];\n  }\n\n  function _deserializeResultSet(nativeResult) {\n    var _nativeResult = (0, _slicedToArray2.default)(nativeResult, 5),\n        errorMessage = _nativeResult[0],\n        insertId = _nativeResult[1],\n        rowsAffected = _nativeResult[2],\n        columns = _nativeResult[3],\n        rows = _nativeResult[4];\n\n    if (errorMessage !== null) {\n      return {\n        error: new Error(errorMessage)\n      };\n    }\n\n    return {\n      insertId: insertId,\n      rowsAffected: rowsAffected,\n      rows: rows.map(function (row) {\n        return (0, _zipObject.default)(columns, row);\n      })\n    };\n  }\n\n  function _escapeBlob(data) {\n    if (typeof data === 'string') {\n      return data.replace(/\\u0002/g, \"\\x02\\x02\").replace(/\\u0001/g, \"\\x01\\x02\").replace(/\\u0000/g, \"\\x01\\x01\");\n    } else {\n      return data;\n    }\n  }\n\n  var _openExpoSQLiteDatabase = (0, _custom.default)(SQLiteDatabase);\n\n  function addExecMethod(db) {\n    db.exec = function (queries, readOnly, callback) {\n      db._db.exec(queries, readOnly, callback);\n    };\n\n    return db;\n  }\n\n  function openDatabase(name) {\n    var version = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '1.0';\n    var description = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : name;\n    var size = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    var callback = arguments.length > 4 ? arguments[4] : undefined;\n\n    if (name === undefined) {\n      throw new TypeError(\"The database name must not be undefined\");\n    }\n\n    var db = _openExpoSQLiteDatabase(name, version, description, size, callback);\n\n    var dbWithExec = addExecMethod(db);\n    return dbWithExec;\n  }\n\n  var _default = {\n    openDatabase: openDatabase\n  };\n  exports.default = _default;\n});","map":[[16,0,1,0],[18,0,2,0],[20,0,3,0],[22,0,4,0],[24,0,5,0],[26,6,6,8,"ExponentSQLite"],[26,20],[26,23,6,27,"NativeModulesProxy"],[26,47],[26,48,6,8,"ExponentSQLite"],[26,62],[27,0,7,0],[28,0,8,0],[30,6,9,6,"SQLiteDatabase"],[30,20],[31,0,10,4],[31,28,10,16,"name"],[31,32,10,4],[31,34,10,22],[32,0,10,22],[33,0,11,8],[33,11,11,13,"_closed"],[33,18,11,8],[33,21,11,23],[33,26,11,8],[34,0,12,8],[34,11,12,13,"_name"],[34,16,12,8],[34,19,12,21,"name"],[34,23,12,8],[35,0,13,5],[39,27,14,9,"queries"],[39,34],[39,36,14,18,"readOnly"],[39,44],[39,46,14,28,"callback"],[39,54],[39,56,14,38],[40,0,15,8],[40,12,15,12],[40,17,15,17,"_closed"],[40,24,15,8],[40,26,15,26],[41,0,16,12],[41,16,16,18],[41,20,16,22,"Error"],[41,25,16,18],[41,58,16,12],[42,0,17,9],[44,0,18,8,"ExponentSQLite"],[44,8,18,8,"ExponentSQLite"],[44,22,18,22],[44,23,18,23,"exec"],[44,27,18,8],[44,28,18,28],[44,33,18,33,"_name"],[44,38,18,8],[44,40,18,40,"queries"],[44,47,18,47],[44,48,18,48,"map"],[44,51,18,40],[44,52,18,52,"_serializeQuery"],[44,67,18,40],[44,68,18,8],[44,70,18,70,"readOnly"],[44,78,18,8],[44,80,18,80,"then"],[44,84,18,8],[44,85,18,85],[44,95,18,85,"nativeResultSets"],[44,111,18,101],[44,113,18,105],[45,0,19,12,"callback"],[45,10,19,12,"callback"],[45,18,19,20],[45,19,19,21],[45,23,19,20],[45,25,19,27,"nativeResultSets"],[45,41,19,43],[45,42,19,44,"map"],[45,45,19,27],[45,46,19,48,"_deserializeResultSet"],[45,67,19,27],[45,68,19,20],[45,69,19,12],[46,0,20,9],[46,9,18,8],[46,11,20,11],[46,21,20,11,"error"],[46,26,20,16],[46,28,20,20],[47,0,22,12,"callback"],[47,10,22,12,"callback"],[47,18,22,20],[47,19,22,21,"error"],[47,24,22,26],[47,36,22,38,"Error"],[47,41,22,21],[47,44,22,46,"error"],[47,49,22,21],[47,52,22,54],[47,56,22,58,"Error"],[47,61,22,54],[47,62,22,64,"error"],[47,67,22,54],[47,68,22,20],[47,69,22,12],[48,0,23,9],[48,9,18,8],[49,0,24,5],[52,30,25,12],[53,0,26,8],[53,13,26,13,"_closed"],[53,20,26,8],[53,23,26,23],[53,27,26,8],[54,0,27,8,"ExponentSQLite"],[54,8,27,8,"ExponentSQLite"],[54,22,27,22],[54,23,27,23,"close"],[54,28,27,8],[54,29,27,29],[54,34,27,34,"_name"],[54,39,27,8],[55,0,28,5],[60,0,30,0],[60,11,30,9,"_serializeQuery"],[60,26,30,0],[60,27,30,25,"query"],[60,32,30,0],[60,34,30,32],[61,0,31,4],[61,11,31,11],[61,12,31,12,"query"],[61,17,31,17],[61,18,31,18,"sql"],[61,21,31,11],[61,23,31,23,"Platform"],[61,45,31,32,"OS"],[61,47,31,23],[61,52,31,39],[61,61,31,23],[61,64,31,51,"query"],[61,69,31,56],[61,70,31,57,"args"],[61,74,31,51],[61,75,31,62,"map"],[61,78,31,51],[61,79,31,66,"_escapeBlob"],[61,90,31,51],[61,91,31,23],[61,94,31,81,"query"],[61,99,31,86],[61,100,31,87,"args"],[61,104,31,11],[61,105,31,4],[62,0,32,1],[64,0,33,0],[64,11,33,9,"_deserializeResultSet"],[64,32,33,0],[64,33,33,31,"nativeResult"],[64,45,33,0],[64,47,33,45],[65,0,33,45],[65,53,34,64,"nativeResult"],[65,65,33,45],[66,0,33,45],[66,8,34,9,"errorMessage"],[66,20,33,45],[67,0,33,45],[67,8,34,23,"insertId"],[67,16,33,45],[68,0,33,45],[68,8,34,33,"rowsAffected"],[68,20,33,45],[69,0,33,45],[69,8,34,47,"columns"],[69,15,33,45],[70,0,33,45],[70,8,34,56,"rows"],[70,12,33,45],[72,0,37,4],[72,8,37,8,"errorMessage"],[72,20,37,20],[72,25,37,25],[72,29,37,4],[72,31,37,31],[73,0,38,8],[73,13,38,15],[74,0,38,17,"error"],[74,8,38,17,"error"],[74,13,38,22],[74,15,38,24],[74,19,38,28,"Error"],[74,24,38,24],[74,25,38,34,"errorMessage"],[74,37,38,24],[75,0,38,15],[75,7,38,8],[76,0,39,5],[78,0,40,4],[78,11,40,11],[79,0,41,8,"insertId"],[79,6,41,8,"insertId"],[79,14,41,16],[79,16,41,8,"insertId"],[79,24,40,11],[80,0,42,8,"rowsAffected"],[80,6,42,8,"rowsAffected"],[80,18,42,20],[80,20,42,8,"rowsAffected"],[80,32,40,11],[81,0,43,8,"rows"],[81,6,43,8,"rows"],[81,10,43,12],[81,12,43,14,"rows"],[81,16,43,18],[81,17,43,19,"map"],[81,20,43,14],[81,21,43,23],[81,31,43,23,"row"],[81,34,43,26],[82,0,43,26],[82,15,43,30],[82,39,43,40,"columns"],[82,46,43,30],[82,48,43,49,"row"],[82,51,43,30],[82,52,43,26],[83,0,43,26],[83,7,43,14],[84,0,40,11],[84,5,40,4],[85,0,45,1],[87,0,46,0],[87,11,46,9,"_escapeBlob"],[87,22,46,0],[87,23,46,21,"data"],[87,27,46,0],[87,29,46,27],[88,0,47,4],[88,8,47,8],[88,15,47,15,"data"],[88,19,47,8],[88,24,47,24],[88,32,47,4],[88,34,47,34],[89,0,49,8],[89,13,49,15,"data"],[89,17,49,19],[89,18,50,13,"replace"],[89,25,49,15],[89,26,50,21],[89,35,49,15],[89,37,50,32],[89,47,49,15],[89,49,51,13,"replace"],[89,56,49,15],[89,57,51,21],[89,66,49,15],[89,68,51,32],[89,78,49,15],[89,80,52,13,"replace"],[89,87,49,15],[89,88,52,21],[89,97,49,15],[89,99,52,32],[89,109,49,15],[89,110,49,8],[90,0,54,5],[90,5,47,4],[90,11,55,9],[91,0,56,8],[91,13,56,15,"data"],[91,17,56,8],[92,0,57,5],[93,0,58,1],[95,0,59,0],[95,6,59,6,"_openExpoSQLiteDatabase"],[95,29,59,29],[95,32,59,32],[95,53,59,51,"SQLiteDatabase"],[95,67,59,32],[95,68,59,0],[97,0,60,0],[97,11,60,9,"addExecMethod"],[97,24,60,0],[97,25,60,23,"db"],[97,27,60,0],[97,29,60,27],[98,0,61,4,"db"],[98,4,61,4,"db"],[98,6,61,6],[98,7,61,7,"exec"],[98,11,61,4],[98,14,61,14],[98,24,61,15,"queries"],[98,31,61,14],[98,33,61,24,"readOnly"],[98,41,61,14],[98,43,61,34,"callback"],[98,51,61,14],[98,53,61,47],[99,0,62,8,"db"],[99,6,62,8,"db"],[99,8,62,10],[99,9,62,11,"_db"],[99,12,62,8],[99,13,62,15,"exec"],[99,17,62,8],[99,18,62,20,"queries"],[99,25,62,8],[99,27,62,29,"readOnly"],[99,35,62,8],[99,37,62,39,"callback"],[99,45,62,8],[100,0,63,5],[100,5,61,4],[102,0,64,4],[102,11,64,11,"db"],[102,13,64,4],[103,0,65,1],[105,0,66,7],[105,11,66,16,"openDatabase"],[105,23,66,7],[105,24,66,29,"name"],[105,28,66,7],[105,30,66,92],[106,0,66,92],[106,8,66,35,"version"],[106,15,66,92],[106,86,66,45],[106,91,66,92],[107,0,66,92],[107,8,66,52,"description"],[107,19,66,92],[107,90,66,66,"name"],[107,94,66,92],[108,0,66,92],[108,8,66,72,"size"],[108,12,66,92],[108,83,66,79],[108,84,66,92],[109,0,66,92],[109,8,66,82,"callback"],[109,16,66,92],[111,0,67,4],[111,8,67,8,"name"],[111,12,67,12],[111,17,67,17,"undefined"],[111,26,67,4],[111,28,67,28],[112,0,68,8],[112,12,68,14],[112,16,68,18,"TypeError"],[112,25,68,14],[112,68,68,8],[113,0,69,5],[115,0,70,4],[115,8,70,10,"db"],[115,10,70,12],[115,13,70,15,"_openExpoSQLiteDatabase"],[115,36,70,38],[115,37,70,39,"name"],[115,41,70,38],[115,43,70,45,"version"],[115,50,70,38],[115,52,70,54,"description"],[115,63,70,38],[115,65,70,67,"size"],[115,69,70,38],[115,71,70,73,"callback"],[115,79,70,38],[115,80,70,4],[117,0,71,4],[117,8,71,10,"dbWithExec"],[117,18,71,20],[117,21,71,23,"addExecMethod"],[117,34,71,36],[117,35,71,37,"db"],[117,37,71,36],[117,38,71,4],[118,0,72,4],[118,11,72,11,"dbWithExec"],[118,21,72,4],[119,0,73,1],[121,17,74,15],[122,0,75,4,"openDatabase"],[122,4,75,4,"openDatabase"],[122,16,75,16],[122,18,75,4,"openDatabase"],[123,0,74,15],[123,3]]},"type":"js/module"}]}